<app-navbar></app-navbar>
<div class="bg-image-theme min-vw-100 min-vh-100">
    <div class="container m-0 min-vw-100 bg-glass min-vh-100">
        <div class="row justify-content-center ">
            <div class="col-lg-8 bg-white p-5 my-5 rounded-3 shadow-lg">
                <h3 class="text-center section-title">Actualizar perfil de asociación</h3>
                <hr>
                <form class="pt-4" [formGroup]="assForm">
                    <div class="row">
                        <div class="col-lg-6 col-md-12 col-sm-12">
                            <div class="mb-5">
                                <label for="name" class="form-label">Nombre</label>
                                <input type="text" class="form-control border" id="name" placeholder="Introducir un nombre" formControlName="name">
                                <div *ngIf="assForm.controls['name'].invalid && (assForm.controls['name'].dirty || assForm.controls['name'].touched)" class="alert">
                                    <div *ngIf="assForm.controls['name'].errors">
                                        <div class="text-danger text-50 m-0">Por favor introduzca un nombre</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-12 col-sm-12">
                            <div class="mb-5">
                                <label for="assType" class="form-label">Tipología</label>
                                <select class="form-select" aria-label="Default select example" formControlName="type">
                                    <option value="{{type}}" *ngFor="let type of associationTypes">{{type}}</option>
                                  </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-12 col-sm-12">
                            <div class="mb-5">
                                <label for="formFile" class="form-label">Imagen de perfil <br> <small class="text-muted">Se recomienda un formato cuadrado</small></label>
                                <input class="form-control border" type="file" id="formFile" (change)="uploadProfileImage($event)">
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-12 col-sm-12">
                            <div class="cover-image mb-5">
                                <div *ngIf="percent != null">
                                    <small>{{percent}}%</small>
                                    <div class="progress mb-3">
                                        <div class="progress-bar" role="progressbar" [ngStyle]="{'width': percent + '%' }" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </div>
                                <div class="row justify-content-center align-items-center">
                                    <div class="col-6 pt-4">
                                        <img class="image-preview mx-0" [src]="association.profileImage" alt="">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-12 col-sm-12">
                            <div class="mb-5">
                                <label for="formFile" class="form-label">Imagen de portada <br> <small class="text-muted">tamaño mínimo 900x300</small></label>
                                <input class="form-control border" type="file" id="formFile" (change)="uploadProfileCover($event)">
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-12 col-sm-12">
                            <div class="cover-image mb-5">
                                <div *ngIf="percentCover != null">
                                    <small>{{percentCover}}%</small>
                                    <div class="progress mb-3">
                                        <div class="progress-bar" role="progressbar" [ngStyle]="{'width': percentCover + '%' }" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </div>
                                <div class="row justify-content-center align-items-center">
                                    <div class="col-6 pt-4">
                                        <img class="image-preview mx-0" [src]="association.profileCover" alt="">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mb-5">
                        <label for="description" class="form-label">Descripción</label>
                        <textarea class="form-control border" id="description" rows="3" placeholder="Una pequeña descripción de la asociación" formControlName="description"></textarea>
                        <div *ngIf="assForm.controls['description'].invalid && (assForm.controls['description'].dirty || assForm.controls['description'].touched)" class="alert">
                            <div *ngIf="assForm.controls['description'].hasError('required')">
                                <div class="text-danger text-50 m-0">Por favor introduzca una pequeña descripción de la asociación</div>
                            </div>
                            <div *ngIf="assForm.controls['description'].hasError('minlength')">
                                <div class="text-danger text-50 m-0">Mínimo 20 caracteres</div>
                            </div>
                            <div *ngIf="assForm.controls['description'].hasError('maxlength')">
                                <div class="text-danger text-50 m-0">Máximo 1000 caracteres</div>
                            </div>
                        </div>
                    </div>
                    <div class="mb-5">
                        <label for="obj" class="form-label">Objetivos</label>
                        <textarea class="form-control border" id="obj" rows="3" placeholder="especifique los objetivos de la asociación" formControlName="objectives"></textarea>
                        <div *ngIf="assForm.controls['objectives'].invalid && (assForm.controls['objectives'].dirty || assForm.controls['objectives'].touched)" class="alert">
                            <div *ngIf="assForm.controls['objectives'].hasError('required')">
                                <div class="text-danger text-50 m-0">Por favor especifique los objetivos de la asociación</div>
                            </div>
                            <div *ngIf="assForm.controls['objectives'].hasError('minlength')">
                                <div class="text-danger text-50 m-0">Mínimo 20 caracteres</div>
                            </div>
                            <div *ngIf="assForm.controls['objectives'].hasError('maxlength')">
                                <div class="text-danger text-50 m-0">Máximo 1000 caracteres</div>
                            </div>
                        </div>
                    </div>
                    <div class="mb-5">
                        <label for="act" class="form-label">Actividades</label>
                        <textarea class="form-control border" id="act" rows="3" placeholder="{{association.activities}}" formControlName="activities"></textarea>
                        <div *ngIf="assForm.controls['activities'].invalid && (assForm.controls['activities'].dirty || assForm.controls['activities'].touched)" class="alert">
                            <div *ngIf="assForm.controls['activities'].hasError('minlength')">
                                <div class="text-danger text-50 m-0">Mínimo 20 caracteres</div>
                            </div>
                            <div *ngIf="assForm.controls['activities'].hasError('maxlength')">
                                <div class="text-danger text-50 m-0">Máximo 1000 caracteres</div>
                            </div>
                        </div>
                    </div>
                    <h6 class="pb-4">Datos de contacto</h6>
                    <div class="row">
                        <div class="col-lg-6 col-md-12 col-sm-12">
                            <div class="mb-5">
                                <label for="inputAddress" class="form-label">Dirección</label>
                                <input type="text" class="form-control border" id="inputAddress" placeholder="calle ejemplo, 12345, localidad, provincia" formControlName="address">
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-12 col-sm-12">
                            <div class="mb-5">
                                <label for="tel" class="form-label">Teléfono</label>
                                <input type="tel" class="form-control border" id="tel" placeholder="" formControlName="telephone">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-12 col-sm-12">
                            <div class="mb-5">
                                <label for="mail" class="form-label">Correo electrónico</label>
                                <input type="text" class="form-control border" id="mail" placeholder="ejemplo@mail.com" formControlName="email">
                                <div *ngIf="assForm.controls['email'].dirty" class="alert">
                                    <div *ngIf="assForm.controls['email'].hasError('required')">
                                        <div class="text-danger text-50 m-0">Por favor introduzca una dirección de correo electrónico</div>
                                    </div>
                                    <div *ngIf="assForm.controls['email'].hasError('email')">
                                        <div class="text-danger text-50 m-0">Por favor introduzca una dirección de correo electrónico válida</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-12 col-sm-12">
                            <div class="mb-5">
                                <label for="web" class="form-label">Página web</label>
                                <input type="text" class="form-control border" id="web" placeholder="https://tupáginaweb.com/" formControlName="website">
                            </div>
                        </div>
                    </div>
                    <h6 class="pb-4">Redes sociales</h6>
                    <div class="row">
                        <div class="col-lg-6 col-md-12 col-sm-12">
                            <div class="mb-5">
                                <label for="inputAddress" class="form-label"><i class="bi bi-facebook mx-2 h5"></i>Facebook</label>
                                <input type="text" class="form-control border" id="inputAddress" placeholder="{{association.facebook}}" formControlName="facebook">
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-12 col-sm-12">
                            <div class="mb-5">
                                <label for="inputAddress" class="form-label"><i class="bi bi-instagram mx-2 h5"></i>Instagram</label>
                                <input type="text" class="form-control border" id="inputAddress" placeholder="{{association.instagram}}" formControlName="instagram">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-12 col-sm-12">
                            <div class="mb-5">
                                <label for="inputAddress" class="form-label"><i class="bi bi-twitter mx-2 h5"></i>Twitter</label>
                                <input type="text" class="form-control border" id="inputAddress" placeholder="{{association.twitter}}" formControlName="twitter">
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-12 col-sm-12">
                            <div class="mb-5">
                                <label for="inputAddress" class="form-label"><i class="bi bi-linkedin mx-2 h5"></i>Linkedin</label>
                                <input type="text" class="form-control border" id="inputAddress" placeholder="{{association.linkedin}}" formControlName="linkedin">
                            </div>
                        </div>
                    </div>
                    <div class="container">
                        <div class="row justify-content-between">
                            <div class="col-lg-6 col-md-6 col-sm-12 text-center">
                                <button class="btn btn-outline-danger mx-2 mb-2" data-bs-toggle="modal" data-bs-target="#eliminateModal">Eliminar perfil</button>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 text-center">
                                <button class="btn btn-info text-light mx-2 mb-2" (click)="updateProfile()">Actualizar perfil</button>
                            </div>
                            <!--Poner un modal-->

                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>



<!--Modal Eliminar-->
<div class="modal fade" id="eliminateModal" tabindex="-1" aria-labelledby="eliminateModal" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">¿Eliminar {{association.name}}?</h5>
                <button type="button" id="closeDelete" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center">
                <p>¿Realmente quires borrar el perfil de <strong>{{association.name}}</strong>?</p>
                <p>Todos los datos serán eliminados</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Volver</button>
                <button type="button" class="btn btn-danger" (click)="deleteAss()">Eliminar</button>
            </div>
        </div>
    </div>
</div>